# =========================
# Activar reescritura
# =========================
RewriteEngine On
RewriteBase /

# =========================
# Redirigir /index.php a /
# =========================
RewriteCond %{THE_REQUEST} /index(\.php)?[/?\s] [NC]
RewriteRule ^index(\.php)?/?$ / [R=301,L]

# =========================
# Reescribir URLs sin extensi칩n a .php
# =========================
# Si existe el archivo .php, reescribir internamente
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)/?$ $1.php [L]

# =========================
# Manejar par치metros en subcarpetas
# =========================
# Ejemplo: /producto/123 => /producto.php?id=123
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ $1.php?id=$2 [QSA,L]

# =========================
# Seguridad b치sica
# =========================
# Evitar listado de directorios
Options -Indexes

# Proteger archivos sensibles
<FilesMatch "\.(env|ini|log|sh|sql|bak|inc|psd|git|htaccess)$">
    Require all denied
</FilesMatch>

# =========================
# P치gina 404 personalizada
# =========================
ErrorDocument 404 /404.php
